<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rex_game</title>
<style>
.window {
    position: relative;
    background-image: url("./img/fundo.png");
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    width: 100%;
    height: 500px;
    border: 2px solid red;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}
body {
    background-color: rgb(217, 223, 222);
}
.obstaculo {
    Z-index:0;
    position: absolute;
    bottom: 0;
    width: 80px;
    right: -50px;
    animation: obstaculoAnimation 4s linear; /* Adjusted duration for smoother flow */
}
.monster {
    Z-index:0;
    position: absolute;
    bottom: 0;
    width: 50px;
    right: -50px;
    color: red;
    animation: monsterAnimation 7s linear; /* Adjusted for smoother movement */
}
@keyframes monsterAnimation {
    0% {
        right: -50px;
        transform: translateX(0); /* Added for smoother sliding */
    }
    40% {
        right: 10%;
        transform: translateX(-10%);
    }
    60% {
        right: 50%;
        transform: translateX(-50%);
    }
    80% {
        right: 50%;
        transform: translateX(-50%);
    }
    100% {
        right: -50px;
        transform: translateX(0);
    }
}
h1 {
    color: white;
}
.player {
    position: absolute;
    bottom: 0;
    color: red;
    width: 120px;
    left: 140px; /* Updated to 140px as requested */
    transition: bottom 0.3s ease, font-size 0.3s ease;
}
.jump {
    animation: jump 800ms ease-in-out; /* Added ease-in-out for smoother jump */
}
.jump-elevated {
    animation: jumpElevated 800ms ease-in-out; /* Added ease-in-out for smoother jump */
}
@keyframes obstaculoAnimation {
    0% {
        right: -50px;
        bottom: 0;
        color: red;
    }
    15% {
        bottom: 40px;
        color: red;
    }
    20% {
        bottom: 20px;
        color: blue;
    }
    25% {
        bottom: 40px;
        color: blue;
    }
    32% {
        bottom: 20px;
        color: purple;
    }
    37% {
        bottom: 0;
        color: pink;
    }
    43% {
        bottom: 40px;
        color: yellow;
    }
    51% {
        bottom: 20px;
        color: green;
    }
    55% {
        bottom: 0;
        color: red;
    }
    67% {
        color: blue;
    }
    73% {
        color: purple;
    }
    80% {
        color: yellow;
    }
    100% {
        right: 107%;
        bottom: 0;
        color: white;
    }
}
@keyframes jump {
    0% {
        bottom: 0;
        transform: scale(1);
    }
    50% {
        bottom: 130px;
        transform: scale(1.05);
    }
    70% {
        bottom: 130px;
        transform: scale(1.03);
    }
    80% {
        bottom: 80px;
        transform: scale(1.02);
    }
    100% {
        bottom: 0;
        transform: scale(1);
    }
}
@keyframes jumpElevated {
    0% {
        bottom: 100px;
        transform: scale(1);
    }
    50% {
        bottom: 220px;
        transform: scale(1.05);
    }
    70% {
        bottom: 220px;
        transform: scale(1.03);
    }
    80% {
        bottom: 180px;
        transform: scale(1.02);
    }
    100% {
        bottom: 80px;
        transform: scale(1);
    }
}
.cortina {
    Z-index:"1";
    height:100%;
    position: absolute;
    width:100%;
    background-color: red;
    display: none;
}
.gameOver {
    Z-index: "2";
    position: absolute;
    display: none;
    animation: gameOverAnimation 2s ease-out;
}
@keyframes gameOverAnimation {
    0% {
        top: 0;
        opacity: 0;
    }
    40% {
        top: 20px;
        opacity: 0.4;
    }
    50% {
        top: 36px;
        opacity: 0.5    
    }
    60% {
        top: 47px;
        opacity: 0.6;
    }
    70% {
        top: 60px;
        opacity: 0.7;
    }
    88% {
        top: 75px;
        opacity: 0.9;
    }
    100% {
        top: 90px;
        opacity: 1;
    }
}
.textGameOver {
    font-size: 50px;
}
.portal {
    color: blue;
    width: 50px;
    position: absolute;
    right: -50px;
    animation: portalAnimation 1800ms linear;
}
@keyframes portalAnimation {
    0% {
        right: -50px;
        bottom: 0;
        transform: scale(1);
    }
    10% {
        bottom: 70px;
        transform: scale(1.1);
    }
    50% {
        right: 40%;
        bottom: 23%;
        transform: scale(1.05);
    }
    100% {
        right: 107%;
        bottom: 0;
        transform: scale(1);
    }
}
.scoreContainer {
    color: black;
    width: 180px;
    display: flex;
    position: absolute;
    background-color: white;
    border: solid red;
    justify-content: start;
    height: 60px;
    top: 0px;
    left: 0px;
}
.bird {
    color: yellow;
    position: absolute;
    bottom: 0;
    right: -50px;
    animation: birdAnimation 6s linear;
    display: none;
    cursor: pointer;
    Z-index:0;
}
@keyframes birdAnimation {
    0% {
        right: -50px;
        bottom: 0;
        transform: scale(1);
    }
    40% {
        right: 10%;
        bottom: 110px;
        transform: scale(1.05);
    }
    50% {
        bottom: 30px;
        color: red;
        transform: scale(1.03);
    }
    55% {
        bottom: 50px;
        transform: scale(1.02);
    }
    60% {
        right: 75%;
        bottom: 160px;
        transform: scale(1.05);
    }
    70% {
        right: 80%;
        bottom: 0;
        transform: scale(1);
    }
    80% {
        right: 104%;
        bottom: 15px;
        transform: scale(1.02);
    }
    100% {
        right: 110%;
        bottom: 0;
        transform: scale(1);
    }
}
.nuvemParalax {
    position: absolute;
    top: 0px;
    right: -720px;
    animation: nuvemAnimation 17s linear infinite;
    cursor: pointer;
}
@keyframes nuvemAnimation {
    0% {
        right: -720px;
        top: 0;
    }
    100% {
        right: 100%;
        top: 0;
    }
}
.nuvemParalax2 {
    position: absolute;
    right: -530px;
    width: 520px;
    top: 120px;
    animation: nuvemAnimation2 9s linear infinite;
}
@keyframes nuvemAnimation2 {
    0% {
        right: -520px;
        top: 120px;
    }
    100% {
        right: 100%;
        top: 120px;
    }
}
</style>
</head>
<body>
    <div class="window">
        <div class="cortina"></div>

        <div class="scoreContainer">
         <h2 class="scoreText">Score: 0</h2> 
        </div>
        <div class="nuvemParalax">
        <img id="nuvem" src="./img/nuvens-removebg-preview.png" alt="nuvem">
        </div>
        <img src="./img/nuvens-removebg-preview.png" class="nuvemParalax2">
        <img src="./img/trex.png" class="player" alt="">
        <img src="./img/Cartoon-Rock-PNG.png" class="obstaculo" alt="">
        <h1 class="monster">monster</h1>
        <h2 class="bird">bird</h2>
        <h1 class="portal">Portal</h1>
        <div class="gameOver">
            <h1 class="textGameOver">Game over</h1>
        </div>
    </div>

   <script>

const player = document.querySelector('.player');
const obstaculo = document.querySelector('.obstaculo');
const monster = document.querySelector('.monster');
const bird = document.querySelector('.bird');
const gameOver = document.querySelector('.gameOver');
const portal = document.querySelector('.portal');
const nuvem = document.querySelector('nuvem')
const nuvem2 = document.querySelector('nuvemParalax2')
let lista_pontos = 0;
let pontosPortal = 0;
let pontosBird = 0;
const pontosCss = document.querySelector('.scoreText');

let isElevated = false;
let loop;
let obstaclePassed = false;

const jump = () => {
    if (!player.classList.contains('jump') && !player.classList.contains('jump-elevated')) {
        player.classList.add(isElevated ? 'jump-elevated' : 'jump');
        setTimeout(() => {
            player.classList.remove('jump');
            player.classList.remove('jump-elevated');
        }, 800);
    }
};
    // spawn do monster 
const monsterSpawn = [60000, 30000, 21050, 19320, 46478];
const mostrarMonstro = () => {
    monster.style.display = "block";
    monster.style.animation = "none";
    monster.offsetHeight; // Trigger reflow
    monster.style.animation = "monsterAnimation 7s linear";
    bird.style.display = "block";
    bird.style.animation = "birdAnimation 6s linear";
    
    setTimeout(() => {
        const proximoTempo = monsterSpawn[Math.floor(Math.random() * monsterSpawn.length)];
        setTimeout(mostrarMonstro, proximoTempo);
    }, 4000);
};
mostrarMonstro();
    // spawn obstaculo
const tempoObstaculo = [1030, 6012, 9689, 150, 214, 4231];
const mostrarObstaculo = () => {
    obstaculo.style.display = "block";
    obstaculo.style.animation = "none";
    obstaculo.offsetHeight; // Trigger reflow
    obstaculo.style.animation = "obstaculoAnimation 4s linear";
    setTimeout(() => {
        obstaculo.style.display = "none";
        const proximoTempo = tempoObstaculo[Math.floor(Math.random() * tempoObstaculo.length)];
        setTimeout(mostrarObstaculo, proximoTempo);
    }, 4000);
};
mostrarObstaculo();
    // spawn do portal timer
const temposPortal = [8770, 8807, 8305, 6730, 4592];
const mostrarPortal = () => {
    portal.style.display = "block";
    portal.style.animation = "none";
    portal.offsetHeight; // Trigger reflow
    portal.style.animation = "portalAnimation 1800ms linear";
    setTimeout(() => {
        portal.style.display = "none";
        const proximoTempo = temposPortal[Math.floor(Math.random() * temposPortal.length)];
        setTimeout(mostrarPortal, proximoTempo);
    }, 1800);
};
mostrarPortal();

    // spawn do bird timer
const temposBird = [1270, 3807, 4305, 2930, 6592];
const mostrarBird = () => {
    bird.style.display = "block";
    bird.style.animation = "none";
    bird.offsetHeight;
    bird.style.animation = "birdAnimation 1800ms linear";
    setTimeout(() => {
        bird.style.display = "none";
        const proximoTempo = temposBird[Math.floor(Math.random() * temposBird.length)];
        setTimeout(mostrarBird, proximoTempo);
    }, 6000);
};
mostrarBird();

const playerTempoHigh = [10000, 6250, 8790, 9825, 7570, 4000];

loop = setInterval(() => {
    const obstaculoPosition = obstaculo.offsetLeft;
    const obstaculoBottom = parseInt(window.getComputedStyle(obstaculo).bottom);
    const playerPosition = parseInt(window.getComputedStyle(player).bottom);
    const portalPosition = portal.offsetLeft;
    const portalBottom = parseInt(window.getComputedStyle(portal).bottom);
    const birdPosition = bird.offsetLeft;
    const birdBottom = parseInt(window.getComputedStyle(bird).bottom);
    const monsterPosition = monster.offsetLeft;
    const monsterBottom = parseInt(window.getComputedStyle(monster).bottom);

    // Colisao com o obstacle
    if (obstaculoPosition <= 175 && obstaculoPosition > 100 && Math.abs(playerPosition - obstaculoBottom) < 45) {
        obstaculo.style.display = "none";
        obstaculo.style.left = obstaculoPosition + "px";
        player.style.display = "none";
        gameOver.style.display = "flex";
        
        portal.style.display = "none";
        portal.style.color = "black";
        obstaculo.style.color = "black";
        monster.style.display = "none";
        obstaculo.style.animation = "none";
        bird.style.animation = "none";
        portal.style.animation = "none";
        nuvem.style.animation = "none";
        nuvem2.style.animation = "none";
        clearInterval(loop);
    } else if (obstaculoPosition <= 140 && obstaculoPosition > 130 && Math.abs(playerPosition - obstaculoBottom) >= 55 && !obstaclePassed) {
        lista_pontos += 3;
        pontosCss.textContent = `Score: ${lista_pontos}`;
        obstaclePassed = true;
    } else if (obstaculoPosition <= 0) {
        obstaclePassed = false;
    }

    // Colisao com o monster
    if (monsterPosition <= 175 && monsterPosition > 100 && Math.abs(playerPosition - monsterBottom) < 45) {
        monster.style.display = "none";
        player.style.display = "none";
        gameOver.style.display = "flex";
        portal.style.display = "none";
        obstaculo.style.display = "none";
        obstaculo.style.animation = "none";
        clearInterval(loop);
    }

    // Colisao com o bird
    if (birdPosition <= 175 && birdPosition > 100 && Math.abs(playerPosition - birdBottom) < 45) {
        bird.style.display = "none";
        player.style.display = "none";
        gameOver.style.display = "flex";
        portal.style.display = "none";
        obstaculo.style.display = "none";
        obstaculo.style.animation = "none";
        clearInterval(loop);
    } else if (birdPosition <= 140 && birdPosition > 130 && Math.abs(playerPosition - birdBottom) >= 55 && !obstaclePassed) {
        lista_pontos += 10;
        pontosCss.textContent = `Score: ${lista_pontos}`;
        obstaclePassed = true;
    } else if (birdPosition <= 0) {
        obstaclePassed = false;
    }

    // Colisao com o portal
    if (portalPosition <= 175 && portalPosition > 100 && playerPosition < 65 && !isElevated) {
        isElevated = true;
        player.style.bottom = "120px";
        player.style.fontSize = "20px";
        obstaculo.style.bottom = "110px";
        obstaculo.style.fontSize = "28px";
        portal.style.display = "none";
        const tempoDescida = playerTempoHigh[Math.floor(Math.random() * playerTempoHigh.length)];
        setTimeout(() => {
            if (isElevated) {
                player.style.bottom = "0";
                player.style.fontSize = "32px";
                obstaculo.style.bottom = "0";
                obstaculo.style.fontSize = "37px";
                isElevated = false;
            }
        }, tempoDescida);
    } else if (portalPosition <= 140 && portalPosition > 130 && Math.abs(playerPosition - portalBottom) >= 55 && !obstaclePassed) {
        lista_pontos += 5;
        pontosCss.textContent = `Score: ${lista_pontos}`;
        obstaclePassed = true;
    } else if (portalPosition <= 0) {
        obstaclePassed = false;
    }
}, 10);


document.addEventListener("keydown", jump);
</script>
</body>
</html>
